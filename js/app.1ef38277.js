(function(t){function o(o){for(var r,i,l=o[0],s=o[1],u=o[2],c=0,b=[];c<l.length;c++)i=l[c],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&b.push(a[i][0]),a[i]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(t[r]=s[r]);f&&f(o);while(b.length)b.shift()();return n.push.apply(n,u||[]),e()}function e(){for(var t,o=0;o<n.length;o++){for(var e=n[o],r=!0,l=1;l<e.length;l++){var s=e[l];0!==a[s]&&(r=!1)}r&&(n.splice(o--,1),t=i(i.s=e[0]))}return t}var r={},a={app:0},n=[];function i(o){if(r[o])return r[o].exports;var e=r[o]={i:o,l:!1,exports:{}};return t[o].call(e.exports,e,e.exports,i),e.l=!0,e.exports}i.m=t,i.c=r,i.d=function(t,o,e){i.o(t,o)||Object.defineProperty(t,o,{enumerable:!0,get:e})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,o){if(1&o&&(t=i(t)),8&o)return t;if(4&o&&"object"===typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(i.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&o&&"string"!=typeof t)for(var r in t)i.d(e,r,function(o){return t[o]}.bind(null,r));return e},i.n=function(t){var o=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(o,"a",o),o},i.o=function(t,o){return Object.prototype.hasOwnProperty.call(t,o)},i.p="/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],s=l.push.bind(l);l.push=o,l=l.slice();for(var u=0;u<l.length;u++)o(l[u]);var f=s;n.push([0,"chunk-vendors"]),e()})({0:function(t,o,e){t.exports=e("56d7")},3019:function(t){t.exports=JSON.parse('{"authors":[{"id":1,"name":"Лев Толстой","birthdate":"1828-09-09","gender":"Mужской","country":"Россия"}],"books":[{"id":1,"isbn":"12345","title":"Война и Мир","authors":[1],"photo":"https://a.wattpad.com/cover/64517639-352-k806859.jpg","desc":"История войны и мира в разнообразных и неожиданных проявлениях, пронизанная множеством сюжетных линий, - это пронзительный, точный, панорамный и обстоятельный взгляд мудрого художника на вечные проблемы Бытия.","tags":["война","классика","мир","роман","толстой"],"price":0,"category":"Классика"}]}')},"56d7":function(t,o,e){"use strict";e.r(o);e("e260"),e("e6cf"),e("cca6"),e("a79d");var r=e("2b0e"),a=function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",{attrs:{id:"app"}},[e("Header",{attrs:{title:"Bookmate - CRUD приложение по типу книжный магазин"}}),e("b-container",{attrs:{fluid:""}},[e("b-tabs",{attrs:{"content-class":"mt-3"}},[e("BookList"),e("AuthorList")],1)],1)],1)},n=[],i=function(){var t=this,o=t.$createElement,r=t._self._c||o;return r("div",[r("div",{staticClass:"logo"},[r("img",{attrs:{alt:t.title,src:e("cf05")}}),r("h3",[t._v(t._s(t.title))])])])},l=[],s={name:"Header",props:{title:String}},u=s,f=(e("8fe6"),e("2877")),c=Object(f["a"])(u,i,l,!1,null,"ea400b36",null),b=c.exports,m=function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",[e("b-tab",{attrs:{active:"",title:"Книги"}},[e("b-form-group",{staticClass:"mb-0",attrs:{label:"Фильтр","label-align-sm":"right","label-cols-sm":"3","label-for":"filterInput","label-size":"sm"}},[e("b-form-input",{attrs:{id:"filterInput",placeholder:"Поиск на названию и описанию ...",type:"search"},model:{value:t.filter,callback:function(o){t.filter=o},expression:"filter"}})],1),e("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-book",modifiers:{"modal-book":!0}}]},[t._v("Добавить книгу")]),e("b-modal",{ref:"modal-book",attrs:{id:"modal-book","hide-footer":"",title:"Новая Книга"}},[e("Book",{on:{"update:book":function(o){return t.addBook(o)}}})],1),e("b-table",{attrs:{id:"booklist","current-page":t.currentPage,fields:t.bookfields,filter:t.filter,filterIncludedFields:t.filterOn,items:t.books,"per-page":t.perPage,striped:""},on:{filtered:t.onFiltered},scopedSlots:t._u([{key:"cell(id)",fn:function(o){return[e("b-button",{on:{click:function(e){return t.showConfirmBox(o.value)}}},[t._v("X")])]}},{key:"cell(photo)",fn:function(t){return[e("b-img",{attrs:{src:t.value,alt:"Fluid image",fluid:""}})]}},{key:"cell(authors)",fn:function(o){return t._l(o.value,(function(o){return e("span",{key:o.id},t._l(t.authorslist,(function(r){return e("span",{key:r.id},[r.value===o?e("span",[t._v(t._s(r.text))]):t._e()])})),0)}))}},{key:"cell(tags)",fn:function(o){return t._l(o.value,(function(o){return e("span",{key:o.id},[e("b-badge",{attrs:{pill:"",variant:"secondary"}},[t._v(t._s(o))])],1)}))}},{key:"cell()",fn:function(o){return[e("i",[t._v(t._s(o.value))])]}}])}),e("b-pagination",{attrs:{"per-page":t.perPage,"total-rows":t.totalRows,align:"center","aria-controls":"booklist",small:""},model:{value:t.currentPage,callback:function(o){t.currentPage=o},expression:"currentPage"}})],1)],1)},d=[],p=(e("a434"),e("b0c0"),function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",[e("b-form",{ref:"bookform",on:{reset:t.onResetBook,submit:function(o){return o.stopPropagation(),o.preventDefault(),t.handleSubmitBook(o)}}},[e("b-form-group",{attrs:{id:"bookform-input-group-title",state:t.titleState,label:"Название:","label-for":"bookform-input-title"}},[e("b-form-input",{attrs:{id:"bookform-input-title",state:t.titleState,autofocus:"",placeholder:"Укажите название",required:"",trim:""},model:{value:t.bookform.title,callback:function(o){t.$set(t.bookform,"title",o)},expression:"bookform.title"}})],1),e("b-form-group",{attrs:{id:"bookform-input-group-isbn",state:t.isbnState,label:"ISBN:","label-for":"bookform-input-isbn"}},[e("b-form-input",{attrs:{id:"bookform-input-isbn",state:t.isbnState,placeholder:"Укажите ISBN",required:"",trim:""},model:{value:t.bookform.isbn,callback:function(o){t.$set(t.bookform,"isbn",o)},expression:"bookform.isbn"}})],1),e("b-form-group",{attrs:{id:"bookform-input-group-authors",label:"Автор(ы):","label-for":"bookform-input-authors"}},[e("b-form-select",{attrs:{id:"bookform-input-authors",options:t.optionsauthors,multiple:"",required:""},model:{value:t.bookform.authors,callback:function(o){t.$set(t.bookform,"authors",o)},expression:"bookform.authors"}})],1),e("b-form-group",{attrs:{id:"bookform-input-group-photo",label:"Обложка:","label-for":"bookform-input-photo"}},[e("b-form-input",{attrs:{id:"bookform-input-photo",pattern:"https?://.+",placeholder:"Укажите URL для фото обложки (http://)",required:"",size:"30",trim:"",type:"url"},model:{value:t.bookform.photo,callback:function(o){t.$set(t.bookform,"photo",o)},expression:"bookform.photo"}})],1),e("b-form-group",{attrs:{id:"bookform-input-group-descr",label:"Описание:","label-for":"bookform-input-descr"}},[e("b-form-textarea",{attrs:{id:"bookform-input-descr","max-rows":"6",placeholder:"Краткое описание книги",required:"",rows:"3",size:"sm",trim:""},model:{value:t.bookform.descr,callback:function(o){t.$set(t.bookform,"descr",o)},expression:"bookform.descr"}})],1),e("b-form-group",{attrs:{id:"bookform-input-group-price",label:"Цена:","label-for":"bookform-input-price"}},[e("b-form-input",{attrs:{id:"bookform-input-price",max:"1000000.00",min:"0.00",placeholder:"Укажите цену",required:"",step:"0.01",type:"number"},model:{value:t.bookform.price,callback:function(o){t.$set(t.bookform,"price",o)},expression:"bookform.price"}})],1),e("b-form-group",{attrs:{id:"bookform-input-group-category",label:"Категории:","label-for":"bookform-input-category"}},[e("b-form-select",{attrs:{id:"bookform-input-category",options:t.optionscategory,required:""},model:{value:t.bookform.category,callback:function(o){t.$set(t.bookform,"category",o)},expression:"bookform.category"}})],1),e("b-form-group",{attrs:{id:"bookform-input-group-tags",label:"Тэги:","label-for":"bookform-input-tags"}},[e("b-form-tags",{attrs:{id:"bookform-input-tags","tag-pills":"",placeholder:"Укажите тэги","add-button-text":"+"},model:{value:t.bookform.tags,callback:function(o){t.$set(t.bookform,"tags",o)},expression:"bookform.tags"}})],1),e("b-button",{attrs:{type:"submit",variant:"primary"}},[t._v("Сохранить")]),e("b-button",{attrs:{type:"reset",variant:"danger"}},[t._v("Очистить")])],1)],1)}),h=[],k={name:"Book",components:{},data:function(){return{bookform:{title:"",isbn:"",authors:[],photo:"",descr:"",tags:[],price:0,category:null},optionsauthors:[],optionscategory:[{text:"Укажите категорию",value:null},"Классика","Детективы","Фантастика"],bookfields:[{key:"isbn",label:"ISBN"},{key:"title",label:"Название",sortable:!0},{key:"authors",label:"Автор(ы)"},{key:"photo",label:"Обложка"},{key:"desc",label:"Описание"},{key:"tags",label:"Тэги"},{key:"price",label:"Цена",sortable:!0},{key:"category",label:"Категория"}]}},computed:{titleState:function(){return this.bookform.title.length>2},isbnState:function(){return this.bookform.isbn.length>2}},mounted:function(){if(localStorage.getItem("authors")){var t=JSON.parse(localStorage.getItem("authors"));for(var o in t)this.optionsauthors.push({text:t[o].name,value:t[o].id})}},methods:{checkFormValidity:function(){var t=this.$refs.bookform.checkValidity();return t},handleSubmitBook:function(){var t=this;this.checkFormValidity()&&(this.$emit("update:book",this.bookform),this.$nextTick((function(){t.$bvModal.hide("modal-book")})))},onResetBook:function(t){t.preventDefault(),this.bookform.title="",this.bookform.isbn="",this.bookform.authors=[],this.bookform.photo="",this.bookform.descr="",this.bookform.tags=[],this.bookform.price=0,this.bookform.category=null}}},g=k,v=Object(f["a"])(g,p,h,!1,null,null,null),y=v.exports,S=e("3019"),x={name:"BookList",components:{Book:y},data:function(){return{bookfields:[{key:"isbn",label:"ISBN"},{key:"title",label:"Название",sortable:!0},{key:"authors",label:"Автор(ы)"},{key:"photo",label:"Обложка"},{key:"desc",label:"Описание"},{key:"tags",label:"Тэги"},{key:"price",label:"Цена",sortable:!0},{key:"category",label:"Категория"},{key:"id",label:"Действия"}],books:[],authorslist:[],totalRows:0,currentPage:1,perPage:5,filter:null,filterOn:["title","desc"]}},computed:{},methods:{getBookNameById:function(t){for(var o in this.books)if(this.books[o].id===t)return this.books[o].title;return""},addBook:function(t){t.id=this.books.length+1,this.books.push(t),this.syncStorage()},delBook:function(t){for(var o in this.books)this.books[o].id===t&&(this.book=this.books.splice(o,1));this.syncStorage()},showConfirmBox:function(t){var o=this;this.$bvModal.msgBoxConfirm('Удалить книгу "'+this.getBookNameById(t)+'" ?',{title:"Подтвердите удаление",okTitle:"Да",cancelTitle:"Нет"}).then((function(e){e&&o.delBook(t)}))},syncStorage:function(){var t=JSON.stringify(this.books);localStorage.setItem("books",t)},onFiltered:function(t){this.totalRows=t.length,this.currentPage=1}},mounted:function(){if(localStorage.getItem("books"))try{this.books=JSON.parse(localStorage.getItem("books"))}catch(r){localStorage.removeItem("books")}else{this.books=S.books;var t=JSON.stringify(this.books);localStorage.setItem("books",t)}if(localStorage.getItem("authors")){var o=JSON.parse(localStorage.getItem("authors"));for(var e in o)this.authorslist.push({text:o[e].name,value:o[e].id})}this.totalRows=this.books.length}},_=x,O=Object(f["a"])(_,m,d,!1,null,null,null),$=O.exports,B=function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",[e("b-tab",{attrs:{title:"Авторы"}},[e("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-author",modifiers:{"modal-author":!0}}]},[t._v("Добавить Автора")]),e("b-modal",{ref:"modal-author",attrs:{id:"modal-author","hide-footer":"",title:"Новый Автор"}},[e("Author",{on:{"update:author":function(o){return t.addAuthor(o)}}})],1),e("b-table",{attrs:{fields:t.authorfields,items:t.authors,striped:""}})],1)],1)},w=[],I=function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",[e("b-form",{ref:"authorform",on:{reset:t.onResetAuthor,submit:function(o){return o.stopPropagation(),o.preventDefault(),t.handleSubmitAuthor(o)}}},[e("b-form-group",{attrs:{id:"authorform-input-group-fio",state:t.nameState,autofocus:"","invalid-feedback":"Укажите ФИО",label:"ФИО:","label-for":"authorform-input-fio",trim:""}},[e("b-form-input",{attrs:{id:"authorform-input-fio",state:t.nameState,placeholder:"Введите ФИО",required:""},model:{value:t.authorform.name,callback:function(o){t.$set(t.authorform,"name",o)},expression:"authorform.name"}})],1),e("b-form-group",{attrs:{id:"authorform-input-group-birthdate",label:"Дата рождения:","label-for":"authorform-input-birthdate"}},[e("b-form-datepicker",{staticClass:"mb-2",attrs:{id:"authorform-input-birthdate","date-format-options":{day:"numeric",month:"numeric",year:"numeric"},local:"ru",placeholder:"Дата не выбрана",required:""},model:{value:t.authorform.birthdate,callback:function(o){t.$set(t.authorform,"birthdate",o)},expression:"authorform.birthdate"}})],1),e("b-form-group",{attrs:{id:"authorform-input-group-gender",label:"Пол:","label-for":"authorform-input-gender"}},[e("b-form-select",{attrs:{id:"authorform-input-gender",options:t.gender,required:""},model:{value:t.authorform.gender,callback:function(o){t.$set(t.authorform,"gender",o)},expression:"authorform.gender"}})],1),e("b-form-group",{attrs:{id:"authorform-input-group-country",label:"Страна:","label-for":"authorform-input-country"}},[e("b-form-select",{attrs:{id:"authorform-input-country",options:t.country,required:""},model:{value:t.authorform.country,callback:function(o){t.$set(t.authorform,"country",o)},expression:"authorform.country"}})],1),e("b-button",{attrs:{type:"submit",variant:"primary"}},[t._v("Сохранить")]),e("b-button",{attrs:{type:"reset",variant:"danger"}},[t._v("Очистить")])],1)],1)},P=[],N={name:"Author",components:{},data:function(){return{authorform:{name:"",birthdate:null,gender:null,country:null},gender:[{text:"Укажите пол",value:null},"Мужской","Женский"],country:[{text:"Укажите страну",value:null},"Россия","Украина","Беларусь"]}},computed:{nameState:function(){return this.authorform.name.length>2}},methods:{checkFormValidity:function(){var t=this.$refs.authorform.checkValidity();return t},handleSubmitAuthor:function(){var t=this;this.checkFormValidity()&&(this.$emit("update:author",this.authorform),this.$nextTick((function(){t.$bvModal.hide("modal-author")})))},onResetAuthor:function(t){t.preventDefault(),this.authorform.name="",this.authorform.birthdate=null,this.authorform.gender=null,this.authorform.country=null}}},j=N,A=Object(f["a"])(j,I,P,!1,null,null,null),q=A.exports,J={name:"AuthorList",components:{Author:q},data:function(){return{authorfields:[{key:"name",label:"ФИО",sortable:!0},{key:"birthdate",label:"Дата рождения"},{key:"gender",label:"Пол"},{key:"country",label:"Страна",sortable:!0}],authors:S.authors}},methods:{addAuthor:function(t){t.id=this.authors.length+1,this.authors.push(t),this.syncStorage()},syncStorage:function(){var t=JSON.stringify(this.authors);localStorage.setItem("authors",t)}},mounted:function(){if(localStorage.getItem("authors"))try{this.authors=JSON.parse(localStorage.getItem("authors"))}catch(o){localStorage.removeItem("authors")}else{this.authors=S.authors;var t=JSON.stringify(this.authors);localStorage.setItem("authors",t)}}},R=J,F=Object(f["a"])(R,B,w,!1,null,null,null),M=F.exports,C={name:"App",components:{Header:b,BookList:$,AuthorList:M},data:function(){return{}},methods:{}},L=C,T=Object(f["a"])(L,a,n,!1,null,null,null),E=T.exports,V=e("5f5b"),D=e("b1e0");e("f9e3"),e("2dd8");r["default"].use(V["a"]),r["default"].use(D["a"]),r["default"].config.productionTip=!1,new r["default"]({render:function(t){return t(E)}}).$mount("#app")},"8fe6":function(t,o,e){"use strict";var r=e("f35a"),a=e.n(r);a.a},cf05:function(t,o,e){t.exports=e.p+"img/logo.bd47a9c6.png"},f35a:function(t,o,e){}});
//# sourceMappingURL=app.1ef38277.js.map